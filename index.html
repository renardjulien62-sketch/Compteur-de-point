<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compteur de Points</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="configuration-ecran">
        <h2>🎲 Compteur de Points</h2>

        <div class="lobby-section input-group">
            <h3>Créer une Nouvelle Partie</h3>
            <input type="text" id="nom-createur" placeholder="Votre nom (Créateur)">
            <label for="couleur-createur" class="label-couleur">Votre couleur :</label>
            <input type="color" id="couleur-createur" value="#FF6384">
            <button id="creer-partie-btn">Créer</button>
            <p id="code-partie-affichage" class="cache">Code de la partie : <strong id="code-partie"></strong> <button id="copier-code-btn">Copier</button></p>
            <p id="attente-joueurs-msg" class="cache">En attente d'autres joueurs... Partagez le code.</p>
        </div>

        <div class="lobby-section input-group">
            <h3>Rejoindre une Partie</h3>
            <input type="text" id="code-partie-input" placeholder="Code de la partie (ex: ABCD)">
            <input type="text" id="nom-rejoindre" placeholder="Votre nom">
             <label for="couleur-rejoindre" class="label-couleur">Votre couleur :</label>
            <input type="color" id="couleur-rejoindre" value="#36A2EB">
            <button id="rejoindre-partie-btn">Rejoindre</button>
            <p id="rejoindre-erreur" class="erreur-msg cache"></p>
        </div>

        <div id="lobby-joueurs" class="input-group cache">
             <h3>Joueurs dans la partie :</h3>
             <div id="liste-joueurs-lobby"></div>
             <div id="options-createur" class="cache">
                <div class="option-secret">
                    <input type="checkbox" id="mode-secret-config">
                    <label for="mode-secret-config">Garder les scores secrets jusqu'à la fin</label>
                </div>
                <div class="option-victoire input-group">
                    <strong>Objectif du jeu :</strong>
                    <label><input type="radio" name="condition-victoire" value="low" checked> Avoir le MOINS de points</label>
                    <label><input type="radio" name="condition-victoire" value="high"> Avoir le PLUS de points</label>
                </div>
                <button id="lancer-partie-btn" disabled>Lancer la partie</button>
             </div>
             <p id="attente-lancement-msg" class="cache">En attente que le créateur lance la partie...</p>
         </div>

    </div>
    <div id="score-ecran" class="cache">
        <h2>🏆 Scores en cours</h2>
        <div id="compteurs-manches">
            <p>Manches jouées : <strong id="manches-passees">0</strong></p>
            <p id="manches-restantes-affichage" class="cache">Manches restantes : <strong id="manches-restantes">--</strong></p>
            <p id="points-restants-affichage" class="cache">Points avant limite : <strong id="points-restants">--</strong></p>
        </div>
        <div class="score-main-container">
            <div class="score-gauche">
                <div id="score-affichage"></div>
                <div class="graphique-container input-group">
                    <h3>📈 Évolution des Scores</h3>
                    <canvas id="graphique-scores"></canvas>
                </div>
                <div class="input-tour">
                    <h3>Nouveau Tour</h3>
                    <div id="saisie-points"></div>
                    <button id="valider-tour">Valider le Tour</button>
                </div>
            </div>
            <div class="score-droite">
                <h3>Conditions d'Arrêt :</h3>
                <div class="fin-partie-options input-group">
                    <label>
                        <input type="checkbox" class="condition-checkbox" id="check-score-limite" data-type="score_limite">
                        Arrêter quand un joueur atteint <input type="number" id="score-limite" min="1" value="100" disabled> points (Total).
                    </label><br>
                    <label>
                        <input type="checkbox" class="condition-checkbox" id="check-score-relatif" data-type="score_relatif">
                        Arrêter quand un joueur a marqué <input type="number" id="score-relatif" min="1" value="50" disabled> points de plus que maintenant.
                    </label><br>
                    <label>
                        <input type="checkbox" class="condition-checkbox" id="check-manche-total" data-type="manche_total">
                        Arrêter après un total de <input type="number" id="nb-manches-total" min="1" value="10" disabled> manches.
                    </label><br>
                    <label>
                        <input type="checkbox" class="condition-checkbox" id="check-manche-restante" data-type="manche_restante">
                        Arrêter dans <input type="number" id="nb-manches-restantes" min="1" value="3" disabled> manches restantes.
                    </label>
                </div>
                <button id="arreter-maintenant" class="bouton-fin">Terminer la partie Maintenant</button>
            </div>
        </div>
    </div>

    <div id="reveal-ecran" class="cache">
        <div id="reveal-content">
            <h3 id="reveal-rang">5ème Place</h3>
            <div class="reveal-nom-container">
                <h2 id="reveal-nom-placeholder">???</h2>
                <h2 id="reveal-nom">Nom du Joueur</h2>
            </div>
            <p id="reveal-score">0 points</p>
        </div>
        <button id="skip-all-btn" class="bouton-fin">Passer l'animation</button>
    </div>

    <div id="podium-ecran" class="cache">
        <h2>🎉 Podium Final !</h2>
        <div id="podium-visuel">
            <div class="podium-place" id="podium-2">
                <span class="podium-medaille">🥈</span>
                <div class="podium-nom">...</div>
                <div class="podium-score">...</div>
            </div>
            <div class="podium-place" id="podium-1">
                <span class="podium-medaille">🥇</span>
                <div class="podium-nom">...</div>
                <div class="podium-score">...</div>
            </div>
            <div class="podium-place" id="podium-3">
                <span class="podium-medaille">🥉</span>
                <div class="podium-nom">...</div>
                <div class="podium-score">...</div>
            </div>
        </div>
        <div id="autres-joueurs" class="input-group">
            <h3>Autres Joueurs</h3>
            <ul id="autres-joueurs-liste"></ul>
        </div>
        <div id="graphique-final-container" class="input-group"></div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-firestore-compat.js"></script>

    <script>
      // 2. Ta configuration Firebase
      const firebaseConfig = {
        apiKey: "AIzaSyD1cC-bahvm3fqZcsYYiBvolyaqVyMGXnI",
        authDomain: "compteur-point-julien.firebaseapp.com",
        projectId: "compteur-point-julien",
        storageBucket: "compteur-point-julien.appspot.com", // Correction: .appspot.com
        messagingSenderId: "961827366523",
        appId: "1:961827366523:web:51db1d7ac1f975f569e4de"
      };

      // 3. Initialise Firebase
      firebase.initializeApp(firebaseConfig);
      const db = firebase.firestore(); // Crée une référence globale à Firestore Database
    </script>
    <script src="script.js"></script>

</body>
</html>
